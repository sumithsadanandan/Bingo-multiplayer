<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sumithâ€™s Bingo - 2 Player</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600&display=swap" rel="stylesheet">

<style>
body {
  margin:0;
  font-family:'Poppins',sans-serif;
  background: #fde2e4;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:16px;
}

h1 { margin:6px 0; }

.board-container {
  display:flex;
  gap:16px;
  margin-top:16px;
  flex-wrap:wrap;
}

.player-board {
  background:#fff;
  padding:12px;
  border-radius:16px;
  box-shadow:0 8px 20px rgba(0,0,0,0.08);
  text-align:center;
}

.grid {
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:8px;
  margin-top:8px;
}

.cell {
  aspect-ratio:1;
  display:flex;
  justify-content:center;
  align-items:center;
  border-radius:12px;
  border:2px solid #e8e8e8;
  font-weight:600;
  cursor:pointer;
  transition:0.25s;
}

.cell.marked { background:#e6dbff; } /* selected */
.cell.completed { background:#c8f7dc; } /* bingo */

button {
  margin-top:16px;
  padding:12px 24px;
  border:none;
  border-radius:30px;
  background:#f48fb1;
  color:#fff;
  cursor:pointer;
  font-size:16px;
}

#turnIndicator { margin-top:12px; font-weight:600; font-size:18px; }

canvas { position:fixed; inset:0; pointer-events:none; }
</style>
</head>

<body>
<h1>Sumithâ€™s Bingo - 2 Player</h1>
<div id="turnIndicator">Current Turn: Player 1</div>
<button id="callNumberBtn">Call Number</button>

<div class="board-container">
  <div class="player-board">
    <h2>Player 1</h2>
    <div class="grid" id="grid1"></div>
    <div id="winner1" style="margin-top:8px; font-weight:600;"></div>
  </div>
  <div class="player-board">
    <h2>Player 2</h2>
    <div class="grid" id="grid2"></div>
    <div id="winner2" style="margin-top:8px; font-weight:600;"></div>
  </div>
</div>

<audio id="sound" src="sound-effect-bingo-122339.mp3"></audio>
<canvas id="confetti"></canvas>

<script>
const SIZE = 5;
let board1=[], board2=[];
let cells1=[], cells2=[];
let calledNumbers = [];
let currentPlayer = 1;
let bingo1=false, bingo2=false;
let confettiFrameId = null;
const sound=document.getElementById('sound'); sound.volume=1;
const grid1=document.getElementById('grid1');
const grid2=document.getElementById('grid2');
const turnIndicator=document.getElementById('turnIndicator');

function shuffle(arr){ return arr.sort(()=>Math.random()-0.5); }

function generateBoard(grid, cellsArr){
  grid.innerHTML=''; 
  cellsArr.length=0;
  const nums=shuffle([...Array(25).keys()].map(i=>i+1));
  nums.forEach(n=>{
    const cell=document.createElement('div');
    cell.className='cell';
    cell.textContent=n;
    cellsArr.push(cell);
    grid.appendChild(cell);
  });
  return nums;
}

function newGame(){
  stopConfetti();
  calledNumbers=[]; currentPlayer=1;
  bingo1=bingo2=false;
  turnIndicator.textContent="Current Turn: Player 1";
  document.getElementById('winner1').textContent='';
  document.getElementById('winner2').textContent='';
  board1=generateBoard(grid1, cells1);
  board2=generateBoard(grid2, cells2);
}

function callNumber(){
  const remaining = [...Array(25).keys()].map(i=>i+1).filter(n=>!calledNumbers.includes(n));
  if(!remaining.length) return;
  const num = remaining[Math.floor(Math.random()*remaining.length)];
  calledNumbers.push(num);
  markNumber(num, cells1);
  markNumber(num, cells2);
  checkBingo(cells1, 'winner1'); checkBingo(cells2, 'winner2');
  currentPlayer = currentPlayer===1?2:1;
  turnIndicator.textContent="Current Turn: Player "+currentPlayer;
}

function markNumber(num, cells){
  cells.forEach(cell=>{
    if(+cell.textContent===num) cell.classList.add('marked');
  });
}

function checkBingo(cells, winnerId){
  if(document.getElementById(winnerId).textContent) return; // already won
  const lines=[];
  for(let r=0;r<SIZE;r++) lines.push([...Array(SIZE)].map((_,c)=>r*SIZE+c));
  for(let c=0;c<SIZE;c++) lines.push([...Array(SIZE)].map((_,r)=>r*SIZE+c));
  let won=false;
  lines.forEach(line=>{
    if(line.every(i=>cells[i].classList.contains('marked'))){
      line.forEach(i=>cells[i].classList.add('completed'));
      won=true;
    }
  });
  if(won){
    document.getElementById(winnerId).textContent="ðŸŽ‰ BINGO!";
    sound.currentTime=0; sound.play().catch(()=>{});
    confetti();
  }
}

/* CONFETTI */
function confetti(){
  const c=document.getElementById('confetti'); const ctx=c.getContext('2d');
  c.width=innerWidth; c.height=innerHeight;
  const pieces=[...Array(120)].map(()=>({x:Math.random()*c.width,y:-20,r:Math.random()*6+4,v:Math.random()*3+2,col:['#f48fb1','#ce93d8','#b39ddb','#80cbc4','#a5d6a7'][Math.floor(Math.random()*5)]}));
  let frame=0;
  function draw(){
    ctx.clearRect(0,0,c.width,c.height);
    pieces.forEach(p=>{p.y+=p.v;ctx.fillStyle=p.col;ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();});
    if(frame++<180) confettiFrameId=requestAnimationFrame(draw);
    else stopConfetti();
  }
  draw();
}

function stopConfetti(){
  const c=document.getElementById('confetti'); const ctx=c.getContext('2d');
  if(confettiFrameId){ cancelAnimationFrame(confettiFrameId); confettiFrameId=null; }
  ctx.clearRect(0,0,c.width,c.height);
}

/* Initialize game */
newGame();
document.getElementById('callNumberBtn').onclick=callNumber;
</script>
</body>
</html>
